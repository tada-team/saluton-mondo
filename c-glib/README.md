Использует glib для юникода.

Requirements:

* gcc
* glibc >= 2.7
* glib2

Build command:

> gcc $(pkg-config --cflags --libs glib-2.0) -g3 -Wextra -Wall ./revert.c -o revert.exe

Run command:

> cat ../data/sample.txt | ./revert.exe

Result:

> Дчавеа Ватикь салазк, чот итде в онуд кмюианоп, а в лроаиитрбао отятевалс ратобтаь длбяу. Дльбу – это оьнче ирсаненяет шткуа. Как пларови, это доовьлон тячона кяпои совоге тврацо. Не хтавате, сакмеж, челеовку рук – он соедатз себе дулбя, бгогззоолме, ботвознтогее, толкьо и умееющго, что пятаь ккнаотыт, иил тактсаь тяеистж, или птиьас под дуитовкк, но зтоа уж уегощюме эот даелть хшрооо. Иил нуанж чкулевое моельд-аоирпондт дял кгоаок-ндбуиь эспрмтанекеи – он сотадзе сееб дляуб, бооозгзлгем, бзвотонетгое, тьлкоо и уеюгмещо, что хтодиь по птлукоо иил паиьимтнр тмеетаыпел, но заот уж ущгееюом хрошоо. Иил сймыа прйстоо саулйч. Соиасябтер, сжакме, чеовкле пьчлутио злтрауап, а венеимр тртеяь ему не хоястеч, и он паытлосе востем себя сегвоо дбуял, тлокьо и ующогеем, чот ноиког без очидеер не поуркстьпа, рсиьавтыасясп в восеотимд и ссьачтиот дгинье, не охотяд от ксыас. Кнеоонч, троиьвт дублйе умюет не все. Я, неррмаип, еещ не улме. То, чот у меня пока псачоулоьл, ниоегч не улемо – даеж хоиьтд. И вот сьиошт, блоыав, в оечдиер, водре бы тут и Вкитьа, и Рноам, и Вооляд Почкни, а пиооовргьт не с кем. Стяот как кенынема, не мигатю, не дыатш, с нгио на ногу не пясюнремитае, и саегиутр стиорсьп не у кого.
